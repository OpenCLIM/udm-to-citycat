kind: M
api_version: v1beta2
metadata:
  display_name: Urban_Flooding:UDM to City Cat
  name: udmcc
  publisher: Newcastle University
  summary: >
    This model takes the data produced by the urban development model and formats it for CityCat. 
  source_code: https://github.com/OpenCLIM/udm-to-citycat
  description: >
    The urban fabric generator produces geopackage files defining where new urban development will take place according to the projected
    socio-economic pathways. Dependent on constraints and attractors, some pathways permit the building of new residental buildings in
    existing green spaces. This model takes the existing greenspaces as of 2020 and removes the polygons where future development is to take
    place. It then merges the new greenspaces with the modified existing greenspaces to be uploaded to the city cat model. The new buildings 
    are also merged with existing buildings to be uploaded to the city cat model. 

spec:
  inputs:
    parameters:        
      - name: save_logfile
        title: save logfile
        type: string
        description: Save logfile
        default: 'False'
        required: false
        options:
          - name: 'False'
            title: False
          - name: 'True'
            title: True
        
    dataslots:
      - name: Existing Buildings
        description:
          Existing buildings must be provided in a GPKG format as a single file. 
        path: inputs/buildings/
        required: false

      - name: Existing Greenspaces
        description:
          Existing greenspaces must be provided in a GPKG format as a single file. 
        path: inputs/green_areas/
        required: false

      - name: Urban Development Raster
        description:
          Planned urban development must be provided in ASCII raster format, within a single file or as multiple tiles. Should be
          taken from the UDM output file *_cell_dph.asc
        path: inputs/
        required: false 
        
      - name: Urban Fabric 
        description:
          Geopackages created by the urban fabric generator model and stored in a zip file due to file size.
        path: inputs/
        required: false 
        
        
  outputs:
    datasets:
      - name: outputs/buildings/*
        type: folder
        description:
          All baseline buildings and new developments merged into one shapefile.
          
      - name: outputs/green_areas/*
        type: folder
        description:
          All baseline green_areas and gardens attached to new developments merged into one shapefile.
        
      - name: outputs/flood_impacts/*
        type: folder
        description:
          A gpgk of the baseline building infrastructure. 
          If outputs are produced, a second gpkg of the new building developments.
        
      - name: outputs/parameters/*
        type: folder
        description:
          All parameters and their values are stored in a csv file.

      - name: outputs/udm_parameters/*
        type: folder
        description:
          All parameters generated by the UDM model and their values.
